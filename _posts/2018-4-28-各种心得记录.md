---
layout:     post
title:      各种心得记录
subtitle:   记录贴
date:       2018-4-28
author:     Heber
header-img: img/post-bg-hacker.jpg
catalog: true
tags:
    - 心得
    - 汇总
---

## 说明
本文章用于记录一些在各种情况下得出的心得，以免忘记。本文章为汇总文章，将长期不固定更新。


## 将二维数组转化为根据父子关系构成的树形数组，树形数组通过简单的多层循环遍历可以很方便地生成多层嵌套菜单或者省市

```objc
<?php
class test{
	 public $arr_pa = [];
	 public $arr = array(
				    0=>array(
				        'cid'=>1,
				        'pid'=>0,
				        'name'=>'亚洲',
				    ),
				    1=>array(
				        'cid'=>2,
				        'pid'=>0,
				        'name'=>'北美洲',
				    ),
				    2=>array(
				        'cid'=>3,
				        'pid'=>1,
				        'name'=>'中国',
				    ),
				    3=>array(
				        'cid'=>4,
				        'pid'=>2,
				        'name'=>'美国',
				    ),
				    4=>array(
				        'cid'=>5,
				        'pid'=>3,
				        'name'=>'北京',
				    ),
				    5=>array(
				        'cid'=>6,
				        'pid'=>3,
				        'name'=>'河北',
				    ),
				    6=>array(
				        'cid'=>7,
				        'pid'=>5,
				        'name'=>'东城区',
				    ),
				    7=>array(
				        'cid'=>8,
				        'pid'=>5,
				        'name'=>'海淀区',
				    ),
				);

	 /**
	  * 生成子id父id相关数组，为后续构成目标数组做好准备。
	  * @Author   Heber
	  * @DateTime 2018-04-28
	  * @return   [type]     [description]
	  */
	   function test(){
	   		foreach ($this->arr as $key => $value) {
	   			$this->arr_pa[$value['cid']] = $value['pid'];
	   		}

	   		for($i=0;$i<count($this->arr_pa);$i++){
	   			$this->get_loop();
	   		}
	   		echo "<pre>";print_r($this->arr_pa);echo "<pre>";
	   		echo "<pre>";print_r($this->arr);echo "<pre>";
		}

/**
 * 将子数组压入父数组的children字段中，并且释放子数组。注意，一次压入一层。
 * @Author   Heber
 * @DateTime 2018-04-28
 * @return   [type]     [description]
 */
	function get_loop(){
		$id = 0;
		foreach ($this->arr as $key => $value) {
			//如果不是根数组，也不是某个数组的父系数组，则压入对应父系数组的children字段，并且释放该数组。
			if($value['pid'] != $id){
				$idd = array_search($value['cid'],$this->arr_pa);
				if(!$idd){
					$this->arr[$value['pid']-1]['children'][] = $value;
					unset($this->arr[$key],$this->arr_pa[$value['cid']]);
				}
			}
		}
	}


		
}

$res = new test();
```