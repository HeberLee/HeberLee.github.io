---
layout:     post
title:      TP5日记(4)
subtitle:   模型(Model)
date:       2017-12-29
author:     Heber
header-img: img/post-bg-hacker.jpg
catalog: true
tags:
    - TP5
    - 框架
---

## 命名规范
model的命名规范：一般model的名字和去掉前缀之后的表名是对应的，例如
表名为imooc_user->模型名User.php
表名imooc_user_info->模型名UserInfo.php

## 使用方法
第一种，使用命名空间，直接使用User::
```objc
<?php
namespace app\index\controller;
use think\Controller;
use app\index\model\User;

class Index extends Controller{
    public function index(){
    	$res = User::get(1);
    	return $res;
    }
}

```

第二种，使用助手函数model来使用模型，无需使用命名空间。
```objc
    	$user = model('User');
    	$res = $user::get(3);
    	return $res;
```

## 使用模型来查询数据
第一种，我们使用上面用到的User::get()来查询，括号里应该填上某个主键的值来作为条件。也可以使用function作为参数。
```objc
//取出id=1的数据
    	$res = User::get(1);
    	dump($res);
//或者以function作为参数
		$res = User::get(function ($query){
					$query->where("id","eq","1")
						  ->field("id");
			});
		dump($res);
```
第二种，User::find()，后面可跟链式操作
```objc
//取出id=1的数据
    	$res = User::where("name","eq","heber")
    				->field("id,name")
    				->find();
    	return $res;
```
第三种，User::all(),用法类似User::get()，是它的多输出版。
```objc
//取出id=1的数据
		$res = User::all(function ($query){
					$query->where("id","LT","6")
						  ->field("id");
			});
		foreach ($res as $key => $value) {
			$res = $value->toarray();
			dump($res);
		}
```
第四种，User::select(),用法类似User::get()，是它的多输出版。
```objc
//取出id>5的数据
    	$res = User::where("id",">","5")
    				->field("id,name")
    				->select();
		foreach ($res as $key => $value) {
			$res = $value->toarray();
			dump($res);
		}
```
第五种，User::value(),会取出单个字段的一行值。
```objc
//取出name=heber的id值
    	$res = User::where("name","eq","heber")
    				->value('id');
    	return $res;
```
第六种，User::column(),会取出多个字段的多行值。
```objc
//取出id<6的name值,且以id作为下标
    	$res = User::where("id","LT","6")
    				->column('name','id');
			dump($res);
		}
```